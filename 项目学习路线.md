# Pledge 项目学习路线指南

这份文档旨在帮助你系统性地掌握 **Pledge V2** 去中心化借贷项目。建议按照以下顺序进行学习。

## 第一阶段：全局理解 (架构篇)
**目标**：不读代码，先懂业务。建立上帝视角。

*   **核心文档**: 务必细读 `pledgev2/项目架构分析文档.md`。
    *   这是一个高质量的架构文档，详细描述了系统中的三种角色（借款人、贷款人、治理者）以及五大核心流程（创建池、存款、借款、结算、清算）。
*   **关键概念**:
    *   **Fixed-rate Lending (固定利率借贷)**: 理解它与 Aave/Compound 等浮动利率协议的区别。
    *   **Pledge (质押)**: 理解资产是如何被锁定的。
    *   **SPV (Special Purpose Vehicle)**: 虽然文档可能没直说，但每个借贷池(Pool)其实就是一个独立的 SPV，风险隔离。

## 第二阶段：核心逻辑 (合约篇 - `pledgev2`)
**目标**：掌握资金流向。这是项目的"心脏"。

*   **核心入口**: `contracts/pledge/PledgePool.sol`
    *   这是最重要的合约，包含 90% 的核心业务逻辑。
    *   **重点函数**:
        *   `depositLend`: 资金进场（做市商/贷款人）。
        *   `depositBorrow`: 抵押品进场（借款人）。
        *   `settle`: **结算**。将匹配状态转为执行状态，计算利息的关键点。
        *   `liquidate`: **清算**。DeFi 协议最凶险也最重要的一环，理解触发清算的阈值公式。
*   **辅助合约**:
    *   `DebtToken.sol`: 借款人的债务凭证（类似借条）。
    *   `BscPledgeOracle.sol`: 喂价模块。如果没有正确的价格，系统就会崩盘。

## 第三阶段：业务支撑 (后端篇 - `pledge-backend`)
**目标**：理解链下服务如何配合链上协议。

*   **技术栈**: Go (Golang)
*   **核心模块**:
    *   `api/`: 前端请求的接口层。
    *   `contract/`: 监听链上事件的模块。后端需要知道链上发生了什么（比如有人存钱了）来更新数据库状态。
    *   `schedule/`: **定时任务**。这是重中之重。去中心化协议通常需要外部触发器（Keepers）。检查一下是否有代码负责：
        *   监控借贷池是否到期？
        *   监控抵押率是否跌破清算线？

## 第四阶段：用户交互 (前端篇 - `pledge-fe`)
**目标**：串联全链路。

*   **技术栈**: React + TypeScript
*   **学习重点**:
    *   搜索代码中的 `PledgePool` 引用，看前端是如何构建交易（Transaction）并发往钱包的。
    *   观察前端如何处理合约返回的大数（BigNumber），以及如何展示状态变化。

---

## 建议起步姿势
1.  保持 `pledgev2/contracts/pledge/PledgePool.sol` 在编辑器中打开。
2.  同时打开 `pledgev2/项目架构分析文档.md` 作为字典查阅。
3.  遇到不懂的业务名词（如 `settle` 的具体时机），先看文档，再看代码实现。
